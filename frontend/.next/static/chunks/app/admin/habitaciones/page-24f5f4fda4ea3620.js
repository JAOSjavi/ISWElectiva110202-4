(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[363],{2896:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>d});var s=a(5155),i=a(2115),c=a(6766),r=a(6874),l=a.n(r),n=a(5695),o=a(9911);function d(){var e;let t=(0,n.useRouter)(),[a,r]=(0,i.useState)(!1),[d,m]=(0,i.useState)("create"),[x,h]=(0,i.useState)(null),[p,b]=(0,i.useState)([]),[u,j]=(0,i.useState)(!0),[f,g]=(0,i.useState)(null);(0,i.useEffect)(()=>{N()},[]);let N=async()=>{try{let e=await fetch("".concat("http://localhost:8000","/api/habitaciones/"));if(e.ok){let t=await e.json();b(t)}else g("Error al cargar las habitaciones")}catch(e){g("Error de conexi\xf3n con el servidor")}finally{j(!1)}},[v,y]=(0,i.useState)({tipo_habitacion:"sencilla",numero_habitacion:"",precio:"",estado:!0,descripcion:"",imagen:null}),w=e=>{m("edit"),h(e),y({tipo_habitacion:e.tipo_habitacion,numero_habitacion:e.numero_habitacion,precio:e.precio,estado:e.estado,descripcion:e.descripcion||"",imagen:null}),r(!0)},k=async e=>{if(confirm("\xbfEst\xe1 seguro de que desea eliminar esta habitaci\xf3n?"))try{(await fetch("".concat("http://localhost:8000","/api/habitaciones/").concat(e,"/"),{method:"DELETE"})).ok?N():g("Error al eliminar la habitaci\xf3n")}catch(e){g("Error de conexi\xf3n con el servidor")}},O=async e=>{e.preventDefault();try{let e="create"===d?"".concat("http://localhost:8000","/api/habitaciones/"):"".concat("http://localhost:8000","/api/habitaciones/").concat(x.id,"/"),t=new FormData;t.append("tipo_habitacion",v.tipo_habitacion),t.append("numero_habitacion",parseInt(v.numero_habitacion)),t.append("precio",parseFloat(v.precio)),t.append("estado",v.estado),t.append("descripcion",v.descripcion||""),v.imagen&&t.append("imagen",v.imagen);let a=await fetch(e,{method:"create"===d?"POST":"PUT",body:t});if(a.ok)N(),r(!1);else{let e=await a.json();g("Error al ".concat("create"===d?"crear":"actualizar"," la habitaci\xf3n: ").concat(e.detail||"Error desconocido"))}}catch(e){g("Error de conexi\xf3n con el servidor")}};return u?(0,s.jsx)("div",{className:"min-h-screen bg-[#FFF3E0] flex items-center justify-center",children:(0,s.jsx)("div",{className:"text-black text-xl",children:"Cargando..."})}):f?(0,s.jsx)("div",{className:"min-h-screen bg-[#FFF3E0] flex items-center justify-center",children:(0,s.jsx)("div",{className:"text-red-600 text-xl",children:f})}):(0,s.jsxs)("div",{className:"flex h-screen bg-gray-100",children:[(0,s.jsx)("div",{className:"w-64 bg-[#8B4513]",children:(0,s.jsxs)("div",{className:"flex flex-col h-full",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)(l(),{href:"/admin/home",className:"flex items-center p-4 text-white hover:bg-[#CD853F] transition-colors",children:[(0,s.jsx)(o.rQ8,{className:"mr-3",size:24}),(0,s.jsx)("span",{className:"text-lg",children:"Home"})]}),(0,s.jsxs)(l(),{href:"/admin/check-in",className:"flex items-center p-4 text-white hover:bg-[#CD853F] transition-colors",children:[(0,s.jsx)(o.Zu,{className:"mr-3",size:24}),(0,s.jsx)("span",{className:"text-lg",children:"Check-in"})]}),(0,s.jsxs)(l(),{href:"/admin/check-out",className:"flex items-center p-4 text-white hover:bg-[#CD853F] transition-colors",children:[(0,s.jsx)(o.axc,{className:"mr-3",size:24}),(0,s.jsx)("span",{className:"text-lg",children:"Check-out"})]}),(0,s.jsxs)(l(),{href:"/admin/habitaciones",className:"flex items-center p-4 bg-[#CD853F] text-white hover:bg-[#DEB887] transition-colors",children:[(0,s.jsx)(o.TiC,{className:"mr-3",size:24}),(0,s.jsx)("span",{className:"text-lg",children:"Habitaciones"})]}),(0,s.jsxs)(l(),{href:"/admin/availability",className:"flex items-center p-4 text-white hover:bg-[#CD853F] transition-colors",children:[(0,s.jsx)(o.TiC,{className:"mr-3",size:24}),(0,s.jsx)("span",{className:"text-lg",children:"Disponibilidad"})]}),(0,s.jsxs)(l(),{href:"/admin/notificaciones",className:"flex items-center p-4 text-white hover:bg-[#CD853F] transition-colors",children:[(0,s.jsx)(o.jNV,{className:"mr-3",size:24}),(0,s.jsx)("span",{className:"text-lg",children:"Notificaciones"})]}),(0,s.jsxs)(l(),{href:"/admin/configuraciones",className:"flex items-center p-4 text-white hover:bg-[#CD853F] transition-colors",children:[(0,s.jsx)(o.Pcn,{className:"mr-3",size:24}),(0,s.jsx)("span",{className:"text-lg",children:"Configuraciones"})]})]}),(0,s.jsxs)("button",{onClick:()=>{t.push("/login")},className:"flex items-center p-4 text-white hover:bg-[#A0522D] transition-colors",children:[(0,s.jsx)(o.e9S,{className:"mr-3",size:24}),(0,s.jsx)("span",{className:"text-lg",children:"Cerrar Sesi\xf3n"})]})]})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"h-64 relative",children:[(0,s.jsx)(c.default,{src:"/images/hotel.jpg",alt:"Hotel Banner",fill:!0,style:{objectFit:"cover"}}),(0,s.jsxs)("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-between px-8",children:[(0,s.jsx)("h1",{className:"text-4xl text-white font-bold",children:"Gesti\xf3n de Habitaciones"}),(0,s.jsx)("div",{className:"flex space-x-4",children:(0,s.jsxs)("button",{onClick:()=>{m("create"),y({tipo_habitacion:"sencilla",numero_habitacion:"",precio:"",estado:!0,descripcion:"",imagen:null}),r(!0)},className:"flex items-center space-x-2 bg-[#CD853F] text-white px-4 py-2 rounded-lg hover:bg-[#DEB887] transition-colors",children:[(0,s.jsx)(o.OiG,{size:20}),(0,s.jsx)("span",{children:"Nueva Habitaci\xf3n"})]})})]})]}),(0,s.jsx)("div",{className:"p-8",children:(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:(0,s.jsxs)("table",{className:"min-w-full",children:[(0,s.jsx)("thead",{className:"bg-[#8B4513] text-white",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"py-3 px-4 text-left",children:"Imagen"}),(0,s.jsx)("th",{className:"py-3 px-4 text-left",children:"N\xfamero"}),(0,s.jsx)("th",{className:"py-3 px-4 text-left",children:"Tipo"}),(0,s.jsx)("th",{className:"py-3 px-4 text-left",children:"Precio"}),(0,s.jsx)("th",{className:"py-3 px-4 text-left",children:"Estado"}),(0,s.jsx)("th",{className:"py-3 px-4 text-left",children:"Descripci\xf3n"}),(0,s.jsx)("th",{className:"py-3 px-4 text-left",children:"Acciones"})]})}),(0,s.jsx)("tbody",{children:p.map(e=>{var t;return(0,s.jsxs)("tr",{className:"border-b border-gray-200 hover:bg-gray-50",children:[(0,s.jsx)("td",{className:"py-3 px-4",children:e.imagen?(0,s.jsx)("div",{className:"relative w-20 h-20",children:(0,s.jsx)(c.default,{src:(null==(t=e.imagen)?void 0:t.startsWith("http"))?e.imagen:"".concat("http://localhost:8000".replace(/\/$/,"")).concat(e.imagen),alt:"Habitaci\xf3n ".concat(e.numero_habitacion),fill:!0,className:"object-cover rounded"})}):(0,s.jsx)("div",{className:"w-20 h-20 bg-gray-200 rounded flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-gray-500",children:"Sin imagen"})})}),(0,s.jsx)("td",{className:"py-3 px-4 text-black",children:e.numero_habitacion}),(0,s.jsx)("td",{className:"py-3 px-4 text-black capitalize",children:e.tipo_habitacion}),(0,s.jsxs)("td",{className:"py-3 px-4 text-black",children:["$",e.precio]}),(0,s.jsx)("td",{className:"py-3 px-4",children:(0,s.jsx)("span",{className:"px-2 py-1 rounded-full text-sm ".concat(e.estado?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.estado?"Disponible":"Ocupada"})}),(0,s.jsx)("td",{className:"py-3 px-4 text-black max-w-md truncate",children:e.descripcion||"Sin descripci\xf3n"}),(0,s.jsx)("td",{className:"py-3 px-4",children:(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsx)("button",{onClick:()=>w(e),className:"p-2 text-blue-600 hover:text-blue-800",children:(0,s.jsx)(o.uO9,{size:20})}),(0,s.jsx)("button",{onClick:()=>k(e.id),className:"p-2 text-red-600 hover:text-red-800",children:(0,s.jsx)(o.qbC,{size:20})})]})})]},e.id)})})]})})})]}),a&&(0,s.jsx)("div",{className:"fixed inset-0 backdrop-blur-sm bg-black/10 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"bg-white p-8 rounded-lg w-96",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold mb-4 text-black",children:"create"===d?"Nueva Habitaci\xf3n":"Editar Habitaci\xf3n"}),(0,s.jsxs)("form",{onSubmit:O,children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-black mb-2",children:"N\xfamero de Habitaci\xf3n"}),(0,s.jsx)("input",{type:"number",value:v.numero_habitacion,onChange:e=>y({...v,numero_habitacion:e.target.value}),className:"w-full p-2 border rounded text-black",required:!0})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-black mb-2",children:"Tipo"}),(0,s.jsxs)("select",{value:v.tipo_habitacion,onChange:e=>y({...v,tipo_habitacion:e.target.value}),className:"w-full p-2 border rounded text-black",children:[(0,s.jsx)("option",{value:"sencilla",children:"Sencilla"}),(0,s.jsx)("option",{value:"doble",children:"Doble"}),(0,s.jsx)("option",{value:"triple",children:"Triple"})]})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-black mb-2",children:"Precio"}),(0,s.jsx)("input",{type:"number",value:v.precio,onChange:e=>y({...v,precio:e.target.value}),className:"w-full p-2 border rounded text-black",required:!0})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-black mb-2",children:"Estado"}),(0,s.jsxs)("select",{value:v.estado,onChange:e=>y({...v,estado:"true"===e.target.value}),className:"w-full p-2 border rounded text-black",children:[(0,s.jsx)("option",{value:"true",children:"Disponible"}),(0,s.jsx)("option",{value:"false",children:"Ocupada"})]})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-black mb-2",children:"Descripci\xf3n"}),(0,s.jsx)("textarea",{value:v.descripcion,onChange:e=>y({...v,descripcion:e.target.value}),className:"w-full p-2 border rounded text-black",rows:"3"})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-black mb-2",children:"Imagen"}),"edit"===d&&x&&x.imagen&&(0,s.jsxs)("div",{className:"mb-2 flex flex-col items-center",children:[(0,s.jsx)(c.default,{src:(null==(e=x.imagen)?void 0:e.startsWith("http"))?x.imagen:"".concat("http://localhost:8000","/media/imagenes/habitaciones/").concat(x.imagen),alt:"Imagen actual de la habitaci\xf3n ".concat(x.numero_habitacion),width:120,height:120,className:"object-cover rounded mb-2"}),(0,s.jsx)("span",{className:"text-xs text-gray-500 mb-1",children:"Imagen actual"})]}),(0,s.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{e.target.files&&e.target.files[0]&&y({...v,imagen:e.target.files[0]})},className:"w-full p-2 border rounded text-black"}),v.imagen&&(0,s.jsxs)("p",{className:"mt-2 text-sm text-gray-600",children:["Imagen seleccionada: ",v.imagen.name]}),"edit"===d&&x&&x.imagen&&!v.imagen&&(0,s.jsx)("p",{className:"mt-1 text-xs text-gray-400",children:"Si deseas cambiar la foto, selecciona una nueva."})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,s.jsx)("button",{type:"button",onClick:()=>r(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancelar"}),(0,s.jsx)("button",{type:"submit",className:"px-4 py-2 bg-[#8B4513] text-white rounded hover:bg-[#CD853F]",children:"create"===d?"Crear":"Guardar"})]})]})]})})]})}},4436:(e,t,a)=>{"use strict";a.d(t,{k5:()=>d});var s=a(2115),i={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},c=s.createContext&&s.createContext(i),r=["attr","size","title"];function l(){return(l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e}).apply(this,arguments)}function n(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,s)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?n(Object(a),!0).forEach(function(t){var s,i,c;s=e,i=t,c=a[t],(i=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,t||"default");if("object"!=typeof s)return s;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(i))in s?Object.defineProperty(s,i,{value:c,enumerable:!0,configurable:!0,writable:!0}):s[i]=c}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function d(e){return t=>s.createElement(m,l({attr:o({},e.attr)},t),function e(t){return t&&t.map((t,a)=>s.createElement(t.tag,o({key:a},t.attr),e(t.child)))}(e.child))}function m(e){var t=t=>{var a,{attr:i,size:c,title:n}=e,d=function(e,t){if(null==e)return{};var a,s,i=function(e,t){if(null==e)return{};var a={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;a[s]=e[s]}return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(s=0;s<c.length;s++)a=c[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}(e,r),m=c||t.size||"1em";return t.className&&(a=t.className),e.className&&(a=(a?a+" ":"")+e.className),s.createElement("svg",l({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,i,d,{className:a,style:o(o({color:e.color||t.color},t.style),e.style),height:m,width:m,xmlns:"http://www.w3.org/2000/svg"}),n&&s.createElement("title",null,n),e.children)};return void 0!==c?s.createElement(c.Consumer,null,e=>t(e)):t(i)}},7546:(e,t,a)=>{Promise.resolve().then(a.bind(a,2896))}},e=>{var t=t=>e(e.s=t);e.O(0,[711,244,766,441,684,358],()=>t(7546)),_N_E=e.O()}]);