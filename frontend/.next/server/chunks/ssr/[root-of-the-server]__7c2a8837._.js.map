{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 31, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/Javier/Desktop/ISWElectiva110202-4/frontend/app/login/page.jsx"],"sourcesContent":["\"use client\";\r\nimport { useState } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport Image from 'next/image';\r\nimport Link from 'next/link';\r\n\r\nexport default function Login() {\r\n  const router = useRouter();\r\n  const [formData, setFormData] = useState({\r\n    username: '',\r\n    password: '',\r\n  });\r\n  const [error, setError] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      [name]: value\r\n    }));\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setError('');\r\n    setLoading(true);\r\n\r\n    try {\r\n      const response = await fetch(`${process.env.NEXT_PUBLIC_API_BASE_URL}/api/registro/login/`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify(formData),\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      if (response.ok) {\r\n        // Guardar el token y la información del usuario\r\n        localStorage.setItem('token', data.access);\r\n        localStorage.setItem('refresh_token', data.refresh);\r\n        localStorage.setItem('is_admin', data.is_admin);\r\n        localStorage.setItem('is_superuser', data.is_superuser);\r\n\r\n        // Redirigir según el tipo de usuario\r\n        if (data.is_superuser) {\r\n          router.push('/admin/home');\r\n        } else if (data.is_admin) {\r\n          router.push('/admin/home');\r\n        } else {\r\n          router.push('/home');\r\n        }\r\n      } else {\r\n        setError(data.detail || 'Error al iniciar sesión');\r\n      }\r\n    } catch (error) {\r\n      setError('Error de conexión con el servidor');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-[#FFF3E0] flex items-center justify-center\">\r\n      <div className=\"bg-white p-8 rounded-lg shadow-md w-full max-w-md\">\r\n        <div className=\"text-center mb-8\">\r\n          <h1 className=\"text-3xl font-bold text-[#8B4513]\">Iniciar Sesión</h1>\r\n        </div>\r\n\r\n        {error && (\r\n          <div className=\"mb-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded\">\r\n            {error}\r\n          </div>\r\n        )}\r\n\r\n        <form onSubmit={handleSubmit} className=\"space-y-6\">\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n              Nombre de Usuario\r\n            </label>\r\n            <input\r\n              type=\"text\"\r\n              name=\"username\"\r\n              value={formData.username}\r\n              onChange={handleChange}\r\n              required\r\n              className=\"w-full p-2 border rounded text-black\"\r\n            />\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n              Contraseña\r\n            </label>\r\n            <input\r\n              type=\"password\"\r\n              name=\"password\"\r\n              value={formData.password}\r\n              onChange={handleChange}\r\n              required\r\n              className=\"w-full p-2 border rounded text-black\"\r\n            />\r\n          </div>\r\n\r\n          <button\r\n            type=\"submit\"\r\n            disabled={loading}\r\n            className=\"w-full bg-[#8B4513] text-white py-2 px-4 rounded hover:bg-[#CD853F] transition-colors disabled:opacity-50\"\r\n          >\r\n            {loading ? 'Iniciando sesión...' : 'Iniciar Sesión'}\r\n          </button>\r\n        </form>\r\n\r\n        <div className=\"mt-4 text-center\">\r\n          <p className=\"text-sm text-gray-600\">\r\n            ¿No tienes una cuenta?{' '}\r\n            <Link href=\"/register\" className=\"text-[#8B4513] hover:underline\">\r\n              Regístrate aquí\r\n            </Link>\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":";;;;AACA;AACA;AACA;AACA;AAJA;;;;;;AAMe,SAAS;IACtB,MAAM,SAAS,CAAA,GAAA,kIAAA,CAAA,YAAS,AAAD;IACvB,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;QACvC,UAAU;QACV,UAAU;IACZ;IACA,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACnC,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAEvC,MAAM,eAAe,CAAC;QACpB,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,EAAE,MAAM;QAChC,YAAY,CAAA,OAAQ,CAAC;gBACnB,GAAG,IAAI;gBACP,CAAC,KAAK,EAAE;YACV,CAAC;IACH;IAEA,MAAM,eAAe,OAAO;QAC1B,EAAE,cAAc;QAChB,SAAS;QACT,WAAW;QAEX,IAAI;YACF,MAAM,WAAW,MAAM,MAAM,6DAAwC,oBAAoB,CAAC,EAAE;gBAC1F,QAAQ;gBACR,SAAS;oBACP,gBAAgB;gBAClB;gBACA,MAAM,KAAK,SAAS,CAAC;YACvB;YAEA,MAAM,OAAO,MAAM,SAAS,IAAI;YAEhC,IAAI,SAAS,EAAE,EAAE;gBACf,gDAAgD;gBAChD,aAAa,OAAO,CAAC,SAAS,KAAK,MAAM;gBACzC,aAAa,OAAO,CAAC,iBAAiB,KAAK,OAAO;gBAClD,aAAa,OAAO,CAAC,YAAY,KAAK,QAAQ;gBAC9C,aAAa,OAAO,CAAC,gBAAgB,KAAK,YAAY;gBAEtD,qCAAqC;gBACrC,IAAI,KAAK,YAAY,EAAE;oBACrB,OAAO,IAAI,CAAC;gBACd,OAAO,IAAI,KAAK,QAAQ,EAAE;oBACxB,OAAO,IAAI,CAAC;gBACd,OAAO;oBACL,OAAO,IAAI,CAAC;gBACd;YACF,OAAO;gBACL,SAAS,KAAK,MAAM,IAAI;YAC1B;QACF,EAAE,OAAO,OAAO;YACd,SAAS;QACX,SAAU;YACR,WAAW;QACb;IACF;IAEA,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC;wBAAG,WAAU;kCAAoC;;;;;;;;;;;gBAGnD,uBACC,8OAAC;oBAAI,WAAU;8BACZ;;;;;;8BAIL,8OAAC;oBAAK,UAAU;oBAAc,WAAU;;sCACtC,8OAAC;;8CACC,8OAAC;oCAAM,WAAU;8CAA+C;;;;;;8CAGhE,8OAAC;oCACC,MAAK;oCACL,MAAK;oCACL,OAAO,SAAS,QAAQ;oCACxB,UAAU;oCACV,QAAQ;oCACR,WAAU;;;;;;;;;;;;sCAId,8OAAC;;8CACC,8OAAC;oCAAM,WAAU;8CAA+C;;;;;;8CAGhE,8OAAC;oCACC,MAAK;oCACL,MAAK;oCACL,OAAO,SAAS,QAAQ;oCACxB,UAAU;oCACV,QAAQ;oCACR,WAAU;;;;;;;;;;;;sCAId,8OAAC;4BACC,MAAK;4BACL,UAAU;4BACV,WAAU;sCAET,UAAU,wBAAwB;;;;;;;;;;;;8BAIvC,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC;wBAAE,WAAU;;4BAAwB;4BACZ;0CACvB,8OAAC,4JAAA,CAAA,UAAI;gCAAC,MAAK;gCAAY,WAAU;0CAAiC;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQ9E","debugId":null}}]
}